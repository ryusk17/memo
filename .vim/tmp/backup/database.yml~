default: &default
  host:     <%= ENV.fetch('DATABASE_HOST', '0.0.0.0') %>
  adapter:  mysql2
  encoding: utf8mb4
  charset: utf8mb4
  collation: utf8mb4_bin
  pool:     <%= ENV.fetch('RAILS_MAX_THREADS', 5) %>
  database: <%= ENV.fetch('DATABASE_NAME') %>
  port:     <%= ENV.fetch('DATABASE_PORT', 33062) %>
  username: <%= ENV.fetch('DATABASE_USERNAME', 'root') %>
  password: <%= ENV.fetch('DATABASE_PASSWORD', '')  %>

development:
  medorder_db:
    <<: *default
  core_db:
    <<: *default
    host:     <%= ENV.fetch('CORE_DATABASE_HOST', 'mysql.core_default')  %>
    database: <%= ENV.fetch('CORE_DATABASE_NAME', 'pharmacloud_core_api_development')  %>
    username: readonly
    replica: true

test:
  medorder_db:
    <<: *default
    database: pharmacloud_medorder_api_test
    password: ''
  core_db:
    <<: *default
    database: pharmacloud_core_api_test
    password: ''

staging:
  medorder_db:
    <<: *default
  core_db:
    <<: *default

production:
  medorder_db:
    <<: *default
    database: <%= ENV.fetch('DATABASE_NAME') %>
    password: <%= ENV.fetch('DATABASE_PASSWORD', '')  %>
  core_db:
    <<: *default
    host:     <%= ENV.fetch('CORE_DATABASE_HOST') %>
    port:     <%= ENV.fetch('CORE_DATABASE_PORT', 3306) %>
    database: <%= ENV.fetch('CORE_DATABASE_NAME') %>
    username: <%= ENV.fetch('CORE_DATABASE_USERNAME', 'readonly') %>
    password: <%= ENV.fetch('CORE_DATABASE_PASSWORD', '')  %>
    replica: true

